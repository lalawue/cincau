# generated by `cincau framework`
pid tmp/cincau-nginx.pid;

# This number should be at maxium the number of CPU on the server
worker_processes 2;

events {
    # Number of connections per worker
    worker_connections 1024;
}

http {
    sendfile on;
    include ./mime.types;

    # lua path and cpath
    lua_code_cache on;
    lua_need_request_body on;

    # init lua
    init_by_lua_file app/env.lua;

    server {
        # List port
        listen 8080;

        # Access log
        access_log logs/access.log;

        # Error log
        error_log logs/error.log;

        # this variable is for view render(lua-resty-template)
        set $template_root '';

        # runtime
        location / {
            proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for;
            content_by_lua_file ./app/main.lua;
        }
    }
}
